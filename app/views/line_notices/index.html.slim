- breadcrumb :line_notices, @line_referential
- content_for :page_header_content do
  .row.mb-sm
    .col-lg-12.text-right
      - if policy(Chouette::LineNotice.new(line_referential: @line_referential)).create?
        = link_to t('line_notices.actions.create'), new_line_referential_line_notice_path(@line_referential), class: 'btn btn-primary'

.page_content
  .container-fluid
    - if @line_notices.any?
      .row
        .col-lg-12
          = table_builder_2 @line_notices,
            [ \
              TableBuilderHelper::Column.new( \
                key: :title, \
                attribute: 'title', \
                link_to: lambda do |line_notice| \
                  [@line_referential, line_notice] \
                end \
              ),
              TableBuilderHelper::Column.new( \
                key: :content, \
                attribute: 'content', \
                link_to: lambda do |line_notice| \
                  [@line_referential, line_notice] \
                end \
              ),
              TableBuilderHelper::Column.new( \
                key: :lines, \
                attribute: ->(p){ lines_to_string(p.lines) }, \
                sortable: false, \
              ), \
            ],
            cls: 'table has-filter'

          = new_pagination @line_notices, 'pull-right'

    - else
      .row.mt-xs
        .col-lg-12
          = replacement_msg t('line_notices.search_no_results')
